<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/js/bootstrap.min.js" integrity="sha384-a5N7Y/aK3qNeh15eJKGWxsqtnX/wWdSZSKp+81YjTmS15nvnvxKHuzaWwXHDli+4"
        crossorigin="anonymous"></script>
    <link href="https://maxcdn.bootstrapcdn.com/bootswatch/4.0.0-beta.2/flatly/bootstrap.min.css" rel="stylesheet" integrity="sha384-FzkHk/sZxl/KbNoSMiA0TgjqdV7ka8VPX/i/Nf2EyhH28i1EVaZ7uf2EEDBBHBo5"
        crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="../public/css/styles.css">
    <title>Document</title>
</head>

<body>
    <div class="row">
        <h2 class="col-md-4">Create Request</h2>
    </div>
    <form class="form-control">
        <div class="container">
            <div class="row">
                <label class="formLabel" for="dateNeeded">Date Needed</label>
            </div>
            <div class="row">
                <input class="formInput" type="date" id="dateNeeded" required>
            </div>
            <div class="row">
                <button class="btn btn-info" id="addItem" type="button" data-toggle="modal" data-target="#itemModal">Add Item</button>
            </div>
            <!--Modal form info populates here-->
            <div class="row" id="newItemName"></div>
            <div class="row" id="newItemQuant"></div>
            <div class="row" id="newItemMeasure"></div>
            <div class="row" id="newItemPrice"></div>

            <div class="row">
                <label class="formLabel col-md-4" for="taxRate">Tax Rate</label>
                <label class="formLabel col-md-4" for="estShip">Estimated Shipping</label>
            </div>
            <div class="row">
                <input class="formInput col-md-4" type="number" id="taxRate" step="0.001">
                <input class="formInput col-md-4" type="number" id="estShip" step="0.01">
            </div>
            <div class="row">
                <label class="formLabel col-md-4" for="justify">Justification</label>
                <label class="formLabel col-md-4" for="comments">Comments</label>
            </div>
            <div class="row">
                <textarea class="formInput" name="justify" id="justify" cols="45" rows="4" required></textarea>
                <textarea class="formInput" name="comments" id="comments" cols="45" rows="4"></textarea>
            </div>
        </div>
        <button type="submit" class="btn btn-info" id="saveRequest">Save Request</button>
    </form>

    <!--Modal-->
    <div id="itemModal" class="modal fade" role="dialog">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Add Item</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <form id="submit">
                    <div class="modal-body">
                        <div class="row">
                            <label class="formLabel col-md-4" for="itemName">Item</label>
                            <label class="formLabel col-md-4" for="quant">Quantity</label>
                        </div>
                        <div class="row">
                            <input class="formInput col-md-4" type="text" name="itemName" id="itemName" required>
                            <input class="formInput col-md-4" type="number" id="quant" required>
                        </div>
                        <div class="row">

                            <label class="formLabel col-md-4" for="measureUnit">Unit of Measurement</label>
                            <label class="formLabel col-md-4" for="estPrice">Estimated Dollar Amount</label>
                        </div>
                        <div class="row">
                            <select class="formInput col-md-4 validate" name="measureUnit" id="measureUnit" required="true">
                                <option value="" selected>Select a Unit</option>
                                <option value="Bottle">Bottle</option>
                                <option value="Box">Box</option>
                                <option value="Carton">Carton</option>
                                <option value="Case">Case</option>
                                <option value="Dozen">Dozen</option>
                                <option value="Each">Each</option>
                                <option value="Foot">Foot</option>
                                <option value="Gallon">Gallon</option>
                                <option value="Gross">Gross</option>
                                <option value="Hour">Hour</option>
                                <option value="Hundred">Hundred</option>
                                <option value="Job">Job</option>
                                <option value="Length">Length</option>
                                <option value="Lot">Lot</option>
                                <option value="Month">Month</option>
                                <option value="Other">Other</option>
                                <option value="Pair">Pair</option>
                                <option value="Package">Package</option>
                                <option value="Pound">Pound</option>
                                <option value="Quart">Quart</option>
                                <option value="Ream">Ream</option>
                                <option value="Roll">Roll</option>
                                <option value="Sack">Sack</option>
                                <option value="Set">Set</option>
                                <option value="Thousand">Thousand</option>
                                <option value="Yard">Yard</option>
                                <option value="Year">Year</option>
                            </select>
                            <input class="formInput col-md-4" type="number" id="estPrice" step="0.01" required>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-info" id="saveBtn" data-dismiss="modal">Save</button>
                        <button type="submit" class="btn btn-info" id="addBtn">Add</button>
                        <button type="button" class="btn btn-info" data-dismiss="modal">Cancel</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</body>

</html>

<script>
    var requestInfo;
    $(document).ready(function () {
        $("#saveBtn").on("click", function (e) {
            e.preventDefault();
            var modalInfo = {
                itemName: $("#itemName").val().trim(),
                quantity: $("#quant").val().trim(),
                measureUnit: $("#measureUnit").val(),
                estimatedPrice: $("#estPrice").val().trim()
            }
            console.log("farts");
            $("#newItemName").append(`<p>Item Name: ${modalInfo.itemName}</p>`)
            $("#newItemQuant").append(`<p>Quantity: ${modalInfo.quantity}</p>`)
            $("#newItemMeasure").append(`<p>Unit of Measure: ${modalInfo.measureUnit}</p>`)
            $("#newItemPrice").append(`<p>Estimated Price: $${modalInfo.estimatedPrice}</p>`)
            console.log("poo");
        })
        $("#saveRequest").on("click", function () {
            requestInfo = {
                dateNeeded: $("#dateNeeded").val().trim(),
                itemName: $("#itemName").val().trim(),
                quantity: $("#quant").val().trim(),
                measureUnit: $("#measureUnit").val(),
                estimatedPrice: $("#estPrice").val().trim(),
                taxRate: $("#taxRate").val().trim(),
                estimatedShipping: $("#estShip").val().trim(),
                justification: $("#justify").val().trim(),
                comments: $("#comments").val().trim()
            }
            module.exports = requestInfo; 
        })
    })
</script>